{"version":3,"sources":["components/LinksList.jsx","components/Loader.jsx","context/AuthContext.js","hooks/http.hook.js","pages/LinksPage.jsx","pages/CreatePage.jsx","components/LinkCard.jsx","pages/DetailPage.jsx","pages/AuthPage.jsx","hooks/message.hook.js","hooks/auth.hook.js","components/Navbar.jsx","App.js","routes.js","index.js"],"names":["LinksList","links","length","map","link","index","from","to","_id","className","Loader","style","display","justifyContent","alignItems","width","height","noop","AuthContext","createContext","token","userId","login","logout","isAuth","useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","LinksPage","React","setLinks","useContext","fetchLinks","authorization","fetched","useEffect","CreatePage","history","useHistory","auth","setLink","window","M","updateTextFields","pressHandler","e","key","push","id","value","onChange","target","onKeyPress","htmlFor","LinkCard","href","rel","clicks","Date","date","toLocaleDateString","DetailPage","linkId","useParams","getLink","AuthPage","email","password","form","setForm","text","toast","html","changeHandler","name","registerHandler","loginHandler","type","onClick","disabled","storageName","Navbar","App","setToken","setUserId","ready","setReady","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","exact","useRoutes","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.63818dac.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction LinksList({ links }) {\r\n  if (!links.length) {\r\n    return <p className=\"center\">No links yet</p>;\r\n  }\r\n\r\n  return (\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>#</th>\r\n          <th>Original link</th>\r\n          <th>Short link</th>\r\n          <th>Open</th>\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        {links.map((link, index) => {\r\n          return (\r\n            <tr key={link._id}>\r\n              <td>{index + 1}</td>\r\n              <td>{link.from}</td>\r\n              <td>{link.to}</td>\r\n              <td>\r\n                <Link to={`/detail/${link._id}`}>Open</Link>\r\n              </td>\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nexport default LinksList;\r\n","import React from \"react\";\r\n\r\nfunction Loader() {\r\n  return (\r\n    <div className=\"preloader-wrapper big active\" style={{display: 'flex', justifyContent: 'center', alignItems: 'center', width: '100vw', height: '100vh'}}>\r\n      <div className=\"spinner-layer spinner-blue\">\r\n        <div className=\"circle-clipper left\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n        <div className=\"gap-patch\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n        <div className=\"circle-clipper right\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Loader;\r\n","import {createContext} from 'react'\r\n\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n    token: null,\r\n    userId: null,\r\n    login: noop,\r\n    logout: noop,\r\n    isAuth: false\r\n})","import { useState, useCallback } from \"react\";\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const request = useCallback(\r\n    async (url, method = \"GET\", body = null, headers = {}) => {\r\n      setLoading(true);\r\n      try {\r\n        if (body) {\r\n          body = JSON.stringify(body);\r\n          headers[\"Content-Type\"] = \"application/json\";\r\n        }\r\n        const response = await fetch(url, { method, body, headers });\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(data.message || \"something went wrong\");\r\n        }\r\n        setLoading(false);\r\n        return data;\r\n      } catch (e) {\r\n        setLoading(false);\r\n        setError(e.message);\r\n        throw e;\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const clearError = useCallback(() => {\r\n    setError(null);\r\n  }, []);\r\n\r\n  return {\r\n    loading,\r\n    request,\r\n    error,\r\n    clearError,\r\n  };\r\n};\r\n","import React from 'react'\r\nimport LinksList from '../components/LinksList'\r\nimport Loader from '../components/Loader'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\n\r\nfunction LinksPage() {\r\n    const [links, setLinks] = React.useState([])\r\n    const {loading, request} = useHttp()\r\n    const {token} = React.useContext(AuthContext)\r\n\r\n    const fetchLinks = React.useCallback( async () => {\r\n        try {\r\n            const fetched = await request('/api/link', 'GET', null, {\r\n                authorization: `Bearer ${token}`\r\n            })\r\n            setLinks(fetched)\r\n        } catch(e) {\r\n\r\n        }\r\n    }, [token, request])\r\n\r\n    React.useEffect(() => {\r\n        fetchLinks()\r\n    }, [fetchLinks])\r\n\r\n    if (loading) {\r\n        return <Loader/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!loading && <LinksList links={links}/>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LinksPage\r\n\r\n\r\n","import React from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction CreatePage() {\r\n  const history = useHistory()\r\n  const auth = React.useContext(AuthContext);\r\n  const { request } = useHttp();\r\n  const [link, setLink] = React.useState(\"\");\r\n\r\n  React.useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, [])\r\n\r\n  const pressHandler = async (e) => {\r\n    if (e.key === \"Enter\") {\r\n      try {\r\n        const data = await request(\r\n          \"/api/link/generate\",\r\n          \"POST\",\r\n          { from: link },\r\n          {\r\n            authorization: `Bearer ${auth.token}`,\r\n          }\r\n        );\r\n        history.push(`/detail/${data.link._id}`)\r\n      } catch (err) {}\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col s8 offset-s2\"></div>\r\n      <div className=\"input-field\">\r\n        <input\r\n          id=\"link\"\r\n          className=\"validate\"\r\n          value={link}\r\n          onChange={(e) => setLink(e.target.value)}\r\n          onKeyPress={pressHandler}\r\n        />\r\n        <label htmlFor=\"link\">Input link</label>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreatePage;\r\n","import React from 'react'\r\n\r\nfunction LinkCard({link}) {\r\n    return (\r\n        <div>\r\n            <h2>Link</h2>\r\n            <p>Your link: <a href={link.to} target=\"_blank\" rel=\"noopener noreferrer\">{link.to}</a></p>\r\n            <p>From: <a href={link.from} target=\"_blank\" rel=\"noopener noreferrer\">{link.from}</a></p>\r\n            <p>Clicks: <strong>{link.clicks}</strong></p>\r\n            <p>Date: <strong>{new Date(link.date).toLocaleDateString()}</strong></p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LinkCard\r\n","import React from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport Loader from '../components/Loader'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport LinkCard from '../components/LinkCard'\r\n\r\nfunction DetailPage() {\r\n    const {token} = React.useContext(AuthContext)\r\n    const [link, setLink] = React.useState(null)\r\n    const linkId = useParams().id\r\n    const {request, loading} = useHttp()\r\n    const getLink = React.useCallback(\r\n        async () => {\r\n            try {\r\n                const fetched = await request(`/api/link/${linkId}`, 'GET', null, {authorization: `Bearer ${token}`})\r\n                setLink(fetched)\r\n            } catch(e) {\r\n\r\n            }\r\n        },\r\n        [token, linkId, request],\r\n    )\r\n\r\n    React.useEffect(()=>{\r\n        getLink()\r\n    }, [getLink])\r\n\r\n    if (loading) {\r\n        return <Loader/>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!loading && link && <LinkCard link={link} />}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default DetailPage\r\n\r\n","import React from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { useMessage } from \"../hooks/message.hook\";\r\n\r\nfunction AuthPage() {\r\n  const auth = React.useContext(AuthContext)\r\n  const { loading, error, request, clearError } = useHttp();\r\n  const [form, setForm] = React.useState({ email: \"\", password: \"\" });\r\n\r\n  const message = useMessage();\r\n\r\n  React.useEffect(() => {\r\n    message(error);\r\n    clearError();\r\n  }, [error, message, clearError]);\r\n\r\n  const changeHandler = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  \r\n\r\n  const registerHandler = async () => {\r\n    try {\r\n      const data = await request(\"/api/auth/register\", \"POST\", { ...form });\r\n      message(data.message)\r\n    } catch (e) {}\r\n  };\r\n\r\n  const loginHandler = async () => {\r\n    try {\r\n      const data = await request(\"/api/auth/login\", \"POST\", { ...form });\r\n      auth.login(data.token, data.userId)\r\n    } catch (e) {}\r\n  }\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col s6 offset-s3\">\r\n        <h1>Link Builder</h1>\r\n        <div className=\"card blue-grey darken-1\">\r\n          <div className=\"card-content white-text\">\r\n            <span className=\"card-title\">Authorization</span>\r\n          </div>\r\n          <div>\r\n            <div className=\"input-field col s6\">\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                className=\"validate\"\r\n                name=\"email\"\r\n                onChange={changeHandler}\r\n              />\r\n              <label htmlFor=\"email\">Email</label>\r\n            </div>\r\n            <div className=\"input-field col s6\">\r\n              <input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                className=\"validate\"\r\n                name=\"password\"\r\n                onChange={changeHandler}\r\n              />\r\n              <label htmlFor=\"password\">Password</label>\r\n            </div>\r\n          </div>\r\n          <div className=\"card-action btns-wrapper\">\r\n            <button className=\"btn yellow darken-4\" onClick={loginHandler}\r\n              disabled={loading}>Log in</button>\r\n            <button\r\n              className=\"btn grey lighten-1 black-text\"\r\n              onClick={registerHandler}\r\n              disabled={loading}\r\n            >\r\n              Sign up\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AuthPage;\r\n","import {useCallback} from 'react'\r\n\r\nexport const useMessage = () => {\r\n  return useCallback(text => {\r\n    if (window.M && text) {\r\n      window.M.toast({ html: text })\r\n    }\r\n  }, [])\r\n}","import {useState, useCallback, useEffect} from 'react'\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [userId, setUserId] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n\r\n    const login = useCallback(\r\n        (jwtToken, id) => {\r\n            setToken(jwtToken)\r\n            setUserId(id)\r\n            localStorage.setItem(storageName, JSON.stringify({userId: id, token: jwtToken}))\r\n        },\r\n        [],\r\n    )\r\n\r\n    const logout = useCallback(\r\n        () => {\r\n            setToken(null)\r\n            setUserId(null)\r\n            localStorage.removeItem(storageName)\r\n        },\r\n        [],\r\n    )\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n        \r\n        if (data && data.token) {\r\n            login(data.token, data.userId)\r\n        }\r\n\r\n        setReady(true)\r\n    }, [login])\r\n\r\n    return {login, logout, token, userId, ready}\r\n}","import React from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nfunction Navbar() {\r\n  const auth = React.useContext(AuthContext);\r\n  const history = useHistory()\r\n\r\n  const logoutHandler = (e) => {\r\n\r\n    auth.logout()\r\n    history.push('/')\r\n  };\r\n\r\n  return (\r\n    <nav>\r\n      <div className=\"nav-wrapper blue darken-1\">\r\n        <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n          <li>\r\n            <NavLink to=\"/create\">Create</NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to=\"/links\">Links</NavLink>\r\n          </li>\r\n          <li>\r\n            <span onClick={logoutHandler}>\r\n              Logout\r\n            </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\nimport \"materialize-css\";\nimport \"./App.css\";\nimport { useRoutes } from \"./routes\";\nimport { useAuth } from \"./hooks/auth.hook\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport Navbar from \"./components/Navbar\";\nimport Loader from \"./components/Loader\";\n\nfunction App() {\n  const { token, login, logout, userId, ready } = useAuth();\n  const isAuth = !!token;\n  const routes = useRoutes(isAuth);\n\n  if (!ready) {\n    return <Loader />\n  }\n  return (\n    <AuthContext.Provider value={{ token, login, logout, userId, isAuth }}>\n      <BrowserRouter>\n      {isAuth && <Navbar/>}\n        <div className=\"container\">{routes}</div>\n      </BrowserRouter>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport LinksPage from \"./pages/LinksPage\";\r\nimport CreatePage from \"./pages/CreatePage\";\r\nimport DetailPage from \"./pages/DetailPage\";\r\nimport AuthPage from \"./pages/AuthPage\";\r\n\r\nexport const useRoutes = (isAuth) => {\r\n  if (isAuth) {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/links\" exact>\r\n          <LinksPage />\r\n        </Route>\r\n        <Route path=\"/create\" exact>\r\n          <CreatePage />\r\n        </Route>\r\n        <Route path=\"/detail/:id\">\r\n          <DetailPage />\r\n        </Route>\r\n        <Redirect to=\"/create\" />\r\n      </Switch>\r\n    );\r\n  }\r\n  return (\r\n    <Switch>\r\n      <Route path=\"/\" exact>\r\n        <AuthPage />\r\n      </Route>\r\n      <Redirect to=\"/\" />\r\n    </Switch>\r\n  );\r\n};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n\n      <App />\n\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}